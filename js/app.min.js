var prontoWeather={location:"",addAnimation:function(a,b,c){"show"==c&&(a.addClass(c),a.removeClass("hide"));a.addClass("animated "+b).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.removeClass("animated "+b);"hide"==c&&(a.addClass(c),a.removeClass("show"))})},displayModal:function(a,b){"hide"==b?prontoWeather.addAnimation($(a+".show"),"zoomOutDown",b):prontoWeather.addAnimation($(a+".hide"),"zoomInUp",b)},getLocation:function(){return(new Promise(function(a,
b){navigator.geolocation.getCurrentPosition(a,b)})).then(function(a){prontoWeather.location="("+a.coords.latitude+", "+a.coords.longitude+")";prontoWeather.getWeather()})["catch"](function(a){prontoWeather.displayModal("#location-settings","show");prontoWeather.displayModal("#loading","hide")})},displayWeather:function(a){var b=$(".weather-widget");b.find(".weather-icon").attr("id","icon-"+a.item.condition.code);b.find(".weather-condition").text(a.item.condition.text);b.find(".temp .temp-int").text(a.item.condition.temp);
b.find(".temp .unit").text(a.units.temperature);b.find(".city-name").text(a.location.city+", "+a.location.region);$(".date-time").text(a.item.condition.date);$(".weather-forecast").empty();a.item.forecast.reverse().forEach(function(a){var b=$("<div>").addClass("day"),c=$("<h3>").html(a.day+" "+a.date.slice(0,2)),e=$("<div>").addClass("wrapper-weather-icon").append($("<div>").addClass("weather-icon icon-"+a.code)),d=$("<span>").addClass("temp-high").text(a.high);a=$("<span>").addClass("temp-low").text(a.low);
d=$("<p>").addClass("temp-all").append(d,a);$(".weather-forecast").prepend(b.append(c,e,d))});$("#wrapper-weather").show();prontoWeather.displayModal("#location-settings","hide");prontoWeather.displayModal("#loading","hide")},getWeather:function(){$.ajax({url:'https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+prontoWeather.location+'") and u="c"',method:"GET",dataType:"json",data:{format:"json"}}).then(function(a){prontoWeather.displayWeather(a.query.results.channel)})["catch"](function(a){prontoWeather.displayModal("#location-settings",
"show");prontoWeather.displayModal("#loading","hide")})},init:function(){prontoWeather.getLocation();$(".widget-settings").on("click",function(a){a.preventDefault();prontoWeather.displayModal("#location-settings","show")});$("#getLocation").on("click",function(a){a.preventDefault();prontoWeather.displayModal("#loading","show");prontoWeather.displayModal("#location-settings","hide");prontoWeather.getLocation()});$("#inputAddress").on("submit",function(a){a.preventDefault();prontoWeather.location=$("#inputPlace").val();
prontoWeather.displayModal("#location-settings","hide");prontoWeather.displayModal("#loading","show");prontoWeather.getWeather();$("#inputPlace").val("")})}};$(function(){prontoWeather.init()});